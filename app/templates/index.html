<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{url_for('static', filename='css/style.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='css/main.css')}}">
    <title>Document</title>
    <script>
        function ModalUpdateShow(id){
        var id1 = id;
        var modal1 = document.getElementById("myModalU");
        var btn1 = document.getElementsByID("Update"+id1);
        btn1.onclick = function() {
        modal1.style.display = "block";
        }}
    </script>
</head>
<body>
    
    <button id="Btn" style="height: 40px; width: 50%; float: left;" onclick="modal.style.display = 'block' ">Add</button>

        <div id="Modal" class="modal">
            <form  method="post">
            <header class="M-Header modal-content">
                Add
                <span class="close">&times;</span>
            </header>
            <div class="modal-content">
                <p class="modalP">Description (max. 120 characters):</p>
                <textarea maxlength="120" id="content" name="content" required></textarea>
                <p class="modalP">Signature (max. 30 characters):</p>
                <input type="text" id="podpis" name="podpis" maxlength="30" minlength="3" required>
                <input type="color" name="color" id="color" required>
            </div>
            <footer class="M-footer modal-content">
                <input type="submit" value="Submit">
            </footer>
          </form>
        </div>
          
    </div>
    {% for note in notes %}
    <div style="background-color: {{note.color}};" class="draggable notes">
        {{note.content}}
        <p>{{note.name}}</p>
        <p>
            <button id="MyUpdate" class="MyUpdate" onclick = 'ModalUpdateShow(this.id)'>update</button> 
            <form action="/delete/{{note.id}}"> <input type="submit" value="delete" class="delete"></form>
        </p>
        <div id="myModalU" class="modalU">
            <form action="/update/{{note.id}}" method="post">
            <header class="M-Header modalU-content">
                Update
                <span class="close1">&times;</span>
            </header>
            <div class="modal-content">
                <p class="modalP">Description (max. 120 characters):</p>
                <textarea maxlength="120" id="content" name="content" required></textarea>
                <p class="modalP">Signature (max. 30 characters):</p>
                <input type="text" id="podpis" name="podpis" maxlength="30" minlength="3" required>
                <input type="color" name="color" id="color" required>
            </div>
            <footer class="M-footer modal-content">
                <input type="submit" value="Submit">
            </footer>
          </form>
          </div>
    </div>
    {% endfor %}
<script src="{{url_for('static', filename='scripts/dragDrop.js')}}"></script>
    <script src="{{url_for('static', filename='scripts/menu.js')}}"></script>
    <script src="{{url_for('static', filename='scripts/modal.js')}}"></script>
    <script>
    ModalUpdateShow(id){
    // Get the modal
        var modal1 = document.getElementById("myModalU");
        
        // Get the button that opens the modal
        var btn1 = document.getElementsByClassName("MyUpdate")[id];
        
        // Get the <span> element that closes the modal
        var span1 = document.getElementsByClassName("close1")[0];
        
        // When the user clicks on the button, open the modal
        
        
        // When the user clicks on <span> (x), close the modal
        span1.onclick = function() {
          modal1.style.display = "none";
        }
        
        // When the user clicks anywhere outside of the modal, close it
        window.onclick = function(event) {
          if (event.target == modal1) {
            modal1.style.display = "none";
          }
        } }</script>

    

</body>
</html>